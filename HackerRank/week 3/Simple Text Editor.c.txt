#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LEN 1000000

char *history[MAX_LEN];
int history_top = -1;

char S[MAX_LEN + 1]; // Current string

void push_history() {
    history[++history_top] = strdup(S);
}

void pop_history() {
    if (history_top >= 0) {
        strcpy(S, history[history_top]);
        free(history[history_top]);
        history_top--;
    }
}

int main() {
    int Q;
    scanf("%d", &Q);

    S[0] = '\0'; 

    for (int i = 0; i < Q; i++) {
        int type;
        scanf("%d", &type);

        if (type == 1) {
           
            char W[MAX_LEN + 1];
            scanf("%s", W);
            push_history(); 
            strcat(S, W);
        }
        else if (type == 2) {
            int k;
            scanf("%d", &k);
            push_history(); 
            int len = strlen(S);
            if (k <= len) {
                S[len - k] = '\0';
            } else {
                S[0] = '\0';
            }
        }
        else if (type == 3) {
            int k;
            scanf("%d", &k);
            if (k > 0 && k <= strlen(S)) {
                printf("%c\n", S[k - 1]);
            }
        }
        else if (type == 4) {
            // Undo
            pop_history();
        }
    }

    
    while (history_top >= 0) {
        free(history[history_top--]);
    }

    return 0;
}
